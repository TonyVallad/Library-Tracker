<!doctype html>
<html lang="fr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>{% block title %}Library Tracker{% endblock %}</title>
	<link rel="stylesheet" href="{{ url_for('static', filename='css/app.css') }}">
</head>
<body class="min-h-screen bg-slate-50 text-slate-800">
	<header class="bg-slate-800 text-white">
		<div class="max-w-6xl mx-auto px-4 py-3 flex items-center gap-4">
			<nav class="flex items-center gap-4 text-sm">
				<a class="hover:text-emerald-300" href="{{ url_for('catalog.home') }}">Catalogue</a>
				<a class="hover:text-emerald-300" href="{{ url_for('refs.refs_home') }}">Référentiels</a>
				{% if current_user.is_authenticated and current_user.has_role('admin') %}
					<a class="hover:text-emerald-300" href="{{ url_for('admin.home') }}">Admin</a>
				{% endif %}
			</nav>
			<div class="ml-auto text-sm">
				{% if current_user.is_authenticated %}
					<a class="inline-flex items-center rounded-md bg-emerald-500 px-3 py-1.5 text-white hover:bg-emerald-600" href="{{ url_for('auth.logout') }}">Déconnexion</a>
				{% else %}
					<a class="inline-flex items-center rounded-md bg-emerald-500 px-3 py-1.5 text-white hover:bg-emerald-600" href="{{ url_for('auth.login') }}">Connexion</a>
				{% endif %}
			</div>
		</div>
	</header>

	<main class="max-w-6xl mx-auto px-4 py-6">
		{% with messages = get_flashed_messages(with_categories=true) %}
			{% if messages %}
				<ul class="mb-4 space-y-2">
				{% for category, message in messages %}
					<li data-flash class="rounded-md px-3 py-2 text-sm {{ 'bg-emerald-100 text-emerald-900' if category=='success' else ('bg-amber-100 text-amber-900' if category=='warning' else ('bg-sky-100 text-sky-900' if category=='info' else 'bg-rose-100 text-rose-900')) }}">{{ message }}</li>
				{% endfor %}
				</ul>
			{% endif %}
		{% endwith %}
		{% block content %}{% endblock %}
	</main>
	<script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
